データモデルとしてシンプルな木とWattsStrogatzのグラフを利用しました.  
データモデルにもパラメータがあるので, 色々変えているうちに結構な数になってしまいました.  

# データモデルとフォルダの命名規則
## 木
木は始点ノードから3ホップ分生成しています.  
一つのノードの次数は5に固定しています.  

**フォルダの命名規則**  
Tree_dist[d] ... dは始点ノードと目的ノードの距離  

例  
Tree_dist2 ... データモデルに木を使い, 始点ノードと目的ノードの距離が2のデータフォルダ

## WattsStrogatz
WattsStrogatzのモデルは下記のパラメータを持っています.  
N ... 全ノード数  
K ... 平均次数 (1ノードに接続されるエッジの平均数)  
β ... エッジが再接続される確率  

これらのうち, β=0.8で固定しています.  
それ以外のパラメータについては, 下記のようにフォルダ単位で分けています.  

**フォルダの命名規則**  
WattsStrogatz_k[K]_n[N]_dist[d]

例  
WattsStrogatz_k4_n200_dist3 
... データモデルに, 平均次数4, 全ノード数200のWattsStrogatzグラフを使い, 始点ノードと目的ノードの距離が3のデータフォルダ

# ユーザーモデル
ユーザーモデルには指数分布を使いました.  
計算量の都合上, 最大で3ホップ先のものまでを選択可能としました.  
確率分布に基づいて4ホップ以上の数が選択された場合, 3ホップに丸めています.  

指数分布に基づいたホップ数は, 累積分布関数の逆関数を用いて下記の様に導出しています.
(合ってるのか少し不安)

```
private float ExpDist(float lamda)
{
	var r = Random.Range(0f, 1f);
	var x = -Mathf.Log(1 - r) / lamda;
	return x;
}
```

# csvファイルの形式
各データは1000件ずつあります.  

## ファイル命名規則
lambda_0_1.csv ...  指数分布のラムダの値が0.1

※ wikiのモデルはlambda_10_0.csvとしました.  

## ヘッダ

| ヘッダ名 | 内容 |
| --- | --- |
|DataSet | 使用しているデータセットです. TreeかWattsStrogatzです.  |
|UserModel(lambda) | ユーザーモデルです. 指数分布のラムダの値です.  |
|Distance | 始点ノードと目的ノードの距離です.  |
|ProbSelectUnknown | 未知ノードを選択する確率です. 今の所0.8で固定です. つまり既知ノードを選択する確率は0.2です.  |
|ProbReturnFirst | 始点ノードに戻る確率です. 基本は0で, lambda_10_0.csvのみ0.1にしています.  |
|OperationCount | 目的ノードに到達するまでの操作回数です.  |

# グラフ
各データフォルダの中に横軸にラムダ, 縦軸に操作回数をとったグラフをおいておきました.  
このグラフはルートにある, SimGraph.pyで作成しています.  

SimGraph.pyは下記のように実行すれば, 指定フォルダ内のデータからグラフを書き出してくれます.  
```
python SimGraph.py [データフォルダ名]
```

# さいごに
データモデルに結構パラメータがあって, そのパラメータもcsvファイルに含めるべきたった気がしますが, 忘れていました.  
現状のシステムでは, データを出力するのに割と時間がかかるのと, メモリを食うのであまり大きなグラフでのシミュレーションができそうにないです.
感覚的には500ノードくらいが限界です.  

ラムダの値を変えたときの変化はWattsStrogatzのグラフよりも木の方が顕著に感じました.  
rich get richerのモデル, Amazonのデータも適用してみたいですが間に合うか微妙です.  

ユーザーモデルとして, 指数分布を使いましたが基本的にラムダの値が小さいほど良いという結果に見えます.  
指数分布では最大でも, 各ホップの選択確率が等確率になるだけで, `1ホップ目を選択する確率 < 2ホップ目を選択する確率`という状況が再現できないので, 
別のユーザーモデルを導入するのも良さそうです.  

かなり大急ぎで作ったので, 悲しいですが何かミスがあったらごめんなさい;;  
